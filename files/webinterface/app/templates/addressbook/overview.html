{% extends "base.html" %}
{% load apptags %}

{% block main %}
    <div class="container">

      <h1>Adressbuch</h1>
      <p>Verwalten von Kontakten und Zuweisen von Telefonnummern.</p>
      <br />

    <table class="table table-hover table-striped table-bordered">
        <thead>
          <tr>
            <th>Hostname</th>
            <th>IPv6-Adresse</th>
            <th>Telefonnummer</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
        <tr>
            <td><a href="{% url app.views.addressbook %}">Meine Adresse</a></td>
            <td>{% display_ip %}</td>
            <td>1</td>
            <td>{% peer_status '100/100' sip_peers %}</td>
        </tr>
        {% for address in addresses %}
        <tr>
            <td><a href="{% url app.views.addressbook_edit address.pk %}">{{ address.name }}</a></td>
            <td>{{ address.ipv6 }}</td>
            <td>{{ address.phone|default_if_none:'-' }}</td>
            <td>{% peer_status address.name sip_peers %}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

<form method="post" class="form-horizontal">
{% csrf_token %}
<fieldset>

<legend>Adresse hinzufügen</legend>

{% if form.errors %}
<div class="alert alert-error">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <strong>Fehler:</strong>
{{ form.errors }}
</div>
{% endif %}

<input {% form_error form.name.errors %} id="name" name="name" type="text" placeholder="Hostname" class="input-large" value="{{ form.name.value }}" />
<input {% form_error form.ipv6.errors %} id="ipv6" name="ipv6" type="text" placeholder="IPv6-Adresse" class="input-xlarge" value="{{ form.ipv6.value }}" />
<input {% form_error form.phone.errors %} id="phone" name="phone" type="text" placeholder="Nummer" class="input-mini" value="{{ form.phone.value }}" maxlength="7" />
<button id="add_address" name="add_address" class="btn btn-primary">Hinzufügen</button>

</fieldset>
</form>

    </div> <!-- /container -->
{% endblock %}
